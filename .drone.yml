pipeline:
  build-test-python:
    image: docker.twistbioscience-staging.com/devops_slave_python:3.6
    pull: true
    commands:
      - cd python
      - pip install invoke
      - inv install
      - inv test
    when:
      branch: [ node-port, master ]

  build-test-node:
    image: node:lts-alpine3.9
    pull: true
    commands:
      - cd node
      - npm install
      - npm run test
    when:
      branch: [ node-port, master ]